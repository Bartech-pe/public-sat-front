<div class="space-y-4 px-3">
  <!-- Encabezado -->
  <div class="bg-gray-50 shadow-lg rounded-xl p-4">
    <h5 class="text-2xl font-semibold">
      Configuración de Mensajes Automáticos
    </h5>
    <div class="flex flex-col w-full gap-3 text-n-slate-11">
      <p
        class="mb-0 text-sm font-normal line-clamp-5 sm:line-clamp-none max-w-3xl text-gray-600"
      >
        Configura las respuestas automaticas para todos los canales de atención
      </p>
    </div>
  </div>

  <!-- Tabs de canales -->
  <p-tabs [value]="value">
    <p-tablist>
      <p-tab [value]="0" class="flex items-center">
        <iconify-icon [icon]="'line-md:chat'" class="text-xl" />
        <span>ChatSAT</span>
      </p-tab>
      <p-tab [value]="1" class="flex items-center"
        ><iconify-icon [icon]="'line-md:email'" class="text-xl" />
        <span>Email</span>
      </p-tab>
      <p-tab [value]="2" class="flex items-center">
        <iconify-icon [icon]="'ic:outline-whatsapp'" class="text-xl" />
        <span>WhatsApp</span>
      </p-tab>
      <p-tab [value]="3" class="flex items-center">
        <iconify-icon [icon]="'line-md:telegram'" class="text-xl" />
        <span>Telegram</span>
      </p-tab>
    </p-tablist>
    <p-tabpanels>
      <!-- ChatSAT -->
      <p-tabpanel [value]="0">
        <div class="flex justify-between items-center py-4">
          <h3 class="font-bold text-xl">Tipos de Mensaje - ChatSAT</h3>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
          <div
            *ngFor="let item of mensajesChat"
            class="border border-gray-400 rounded-lg p-4 shadow-2xl space-y-1"
          >
            <div class="flex items-center gap-2">
              <iconify-icon [icon]="'tabler:message'" class="text-base" />
              <p class="font-semibold text-lg">{{ item.name }}</p>
            </div>
            <div class="">
              <p class="font-normal text-sm">{{ item.descripcion }}</p>
            </div>
            <div class="flex items-center gap-2">
              <p class="font-normal text-sm mt-1">Estado:</p>
              <p-tag
                class="text-xs"
                [value]="item.status == true ? 'Activo' : 'Inactivo'"
                [severity]="item.status == true ? 'success' : 'danger'"
                ><iconify-icon
                  *ngIf="item.status == true"
                  [icon]="'prime:check-circle'"
                  class="text-lg"
                />
                <iconify-icon
                  *ngIf="item.status != true"
                  [icon]="'system-uicons:cross-circle'"
                  class="text-lg"
                />
              </p-tag>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <p class="font-normal text-sm">Última edición:</p>
                <p class="font-semibold text-sm">
                  {{ item.updatedAt | date : "dd/MM/yyyy" }}
                </p>
              </div>
              <btn-edit-square (onClick)="onEdit(item)" />
            </div>
          </div>
        </div>
      </p-tabpanel>
      <!-- Email -->
      <p-tabpanel [value]="1">
        <div class="flex justify-between items-center py-4">
          <h3 class="font-bold text-xl">Tipos de Mensaje - Email</h3>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
          <div
            *ngFor="let item of mensajesCorreo"
            class="border border-gray-400 rounded-lg p-4 shadow-2xl space-y-1"
          >
            <div class="flex items-center gap-2">
              <iconify-icon [icon]="'tabler:message'" class="text-base" />
              <p class="font-semibold text-lg">{{ item.name }}</p>
            </div>
            <div class="">
              <p class="font-normal text-sm">{{ item.descripcion }}</p>
            </div>
            <div class="flex items-center gap-2">
              <p class="font-normal text-sm mt-1">status:</p>
              <p-tag
                class="text-xs"
                [value]="item.status == true ? 'Activo' : 'Inactivo'"
                [severity]="item.status == true ? 'success' : 'danger'"
                ><iconify-icon
                  *ngIf="item.status == true"
                  [icon]="'prime:check-circle'"
                  class="text-lg"
                />
                <iconify-icon
                  *ngIf="item.status != true"
                  [icon]="'system-uicons:cross-circle'"
                  class="text-lg"
                />
              </p-tag>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <p class="font-normal text-sm">Última edición:</p>
                <p class="font-semibold text-sm">
                  {{ item.updatedAt | date : "dd/MM/yyyy" }}
                </p>
              </div>
              <btn-edit-square (onClick)="onEdit(item)" />
            </div>
          </div>
        </div>
      </p-tabpanel>
      <!-- WhatsApp -->
      <p-tabpanel [value]="2">
        <div class="flex justify-between items-center py-4">
          <h3 class="font-bold text-xl">Tipos de Mensaje - WhatsApp</h3>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
          <div
            *ngFor="let item of mensajesWhatsApp"
            class="border border-gray-400 rounded-lg p-4 shadow-2xl space-y-1"
          >
            <div class="flex items-center gap-2">
              <iconify-icon [icon]="'tabler:message'" class="text-base" />
              <p class="font-semibold text-lg">{{ item.name }}</p>
            </div>
            <div class="">
              <p class="font-normal text-sm">{{ item.descripcion }}</p>
            </div>
            <div class="flex items-center gap-2">
              <p class="font-normal text-sm mt-1">status:</p>
              <p-tag
                class="text-xs"
                [value]="item.status == true ? 'Activo' : 'Inactivo'"
                [severity]="item.status == true ? 'success' : 'danger'"
                ><iconify-icon
                  *ngIf="item.status == true"
                  [icon]="'prime:check-circle'"
                  class="text-lg"
                />
                <iconify-icon
                  *ngIf="item.status != true"
                  [icon]="'system-uicons:cross-circle'"
                  class="text-lg"
                />
              </p-tag>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <p class="font-normal text-sm">Última edición:</p>
                <p class="font-semibold text-sm">
                  {{ item.updatedAt | date : "dd/MM/yyyy" }}
                </p>
              </div>
              <btn-edit-square (onClick)="onEdit(item)" />
            </div>
          </div>
        </div>
      </p-tabpanel>
      <!-- Telegram -->
      <p-tabpanel [value]="3">
        <div class="flex justify-between items-center py-4">
          <h3 class="font-bold text-xl">Tipos de Mensaje - Telegram</h3>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
          <div
            *ngFor="let item of mensajesTelegram"
            class="border border-gray-400 rounded-lg p-4 shadow-2xl space-y-1"
          >
            <div class="flex items-center gap-2">
              <iconify-icon [icon]="'tabler:message'" class="text-base" />
              <p class="font-semibold text-lg">{{ item.name }}</p>
            </div>
            <div class="">
              <p class="font-normal text-sm">{{ item.descripcion }}</p>
            </div>
            <div class="flex items-center gap-2">
              <p class="font-normal text-sm mt-1">status:</p>
              <p-tag
                class="text-xs"
                [value]="item.status == true ? 'Activo' : 'Inactivo'"
                [severity]="item.status == true ? 'success' : 'danger'"
                ><iconify-icon
                  *ngIf="item.status == true"
                  [icon]="'prime:check-circle'"
                  class="text-lg"
                />
                <iconify-icon
                  *ngIf="item.status != true"
                  [icon]="'system-uicons:cross-circle'"
                  class="text-lg"
                />
              </p-tag>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center gap-2">
                <p class="font-normal text-sm">Última edición:</p>
                <p class="font-semibold text-sm">
                  {{ item.updatedAt | date : "dd/MM/yyyy" }}
                </p>
              </div>
              <btn-edit-square (onClick)="onEdit(item)" />
            </div>
          </div>
        </div>
      </p-tabpanel>
    </p-tabpanels>
  </p-tabs>
</div>

<!-- Modal Editar Mensaje Aut -->
<p-dialog
  [(visible)]="displayEditarMensaje"
  [modal]="true"
  [header]="'Editar Mensaje Automático '"
  [dismissableMask]="true"
  styleClass="modal-lg"
>
  <form [formGroup]="formData" (ngSubmit)="onSubmit()">
    <div class="flex flex-col gap-2">
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium" for="nameUser">
          Título del mensaje <span class="text-xs">*</span>
        </label>
        <input id="nameUser" pInputText formControlName="name" />
        <div
          *ngIf="
            formData.controls.name.invalid && formData.controls.name.touched
          "
        >
          <small *ngIf="formData.controls.name.errors?.['required']">
            El nombre es requerido.
          </small>
        </div>
      </div>
      <div class="flex flex-col gap-2">
        <label class="text-sm font-medium" for="displayNameUser">
          Contenido del mensaje <span class="text-xs">*</span>
        </label>
        <textarea
          id="descriptionConsulta"
          rows="2"
          cols="30"
          pTextarea
          formControlName="description"
        ></textarea>
        <div
          *ngIf="
            formData.controls.description.invalid && formData.controls.description.touched
          "
        >
          <small *ngIf="formData.controls.description.errors?.['required']">
            El mensaje es requerido.
          </small>
        </div>
      </div>
      <div class="flex items-center gap-2 py-1">
        <p-toggleswitch formControlName="status" inputId="activeRole" />
        <label class="text-sm font-medium pb-1.5" for="activeRole">{{
          isActive ? "Activo" : "Inactivo"
        }}</label>
      </div>
    </div>
    <div class="flex justify-self-end pt-4 gap-4">
      <button-cancel (click)="displayEditarMensaje = false" />
      <p-button
        type="submit"
        size="small"
        label="Actualizar"
        styleClass="w-full !rounded-full !shadow-none"
        severity="primary"
        [disabled]="formData.invalid"
      >
        <iconify-icon [icon]="'ci:save'" class="text-lg" />
      </p-button>
    </div>
  </form>
</p-dialog>
