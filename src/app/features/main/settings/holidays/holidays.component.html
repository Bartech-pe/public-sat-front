<div class="flex flex-col h-full">
  <!-- Barra superior -->

  <div class="bg-gray-50 shadow rounded-xl p-4">
        <div class="flex justify-between items-center">
          <div>
            <h5 class="text-2xl font-semibold mb-1">Feriados</h5>
            <div class="flex flex-col w-full gap-3 text-n-slate-11">
              <p
                class="mb-0 text-sm font-normal line-clamp-5 sm:line-clamp-none max-w-3xl text-gray-600"
              >
                Administra los feriados que afectarán a tus campañas.
              </p>
            </div>
          </div>
        </div>
    

  <div class="flex items-center justify-between gap-4 px-6 py-4">
    <!-- Botones de navegación -->
    <div class="flex items-center gap-4">
      <div class="flex">
        <!-- Mes anterior -->
        <div
          class="h-8 w-12 bg-sky-500 text-slate-50 hover:bg-sky-600 flex items-center justify-center cursor-pointer rounded-l-full"
          mwlCalendarPreviousView
          [view]="view"
          [(viewDate)]="viewDate"
          (viewDateChange)="closeOpenMonthViewDay()"
        >
          <iconify-icon icon="bx:bxs-chevron-left" class="text-xl" />
        </div>

        <!-- Mes siguiente -->
        <div
          class="h-8 w-12 bg-sky-500 text-slate-50 hover:bg-sky-600 flex items-center justify-center cursor-pointer rounded-r-full"
          mwlCalendarNextView
          [view]="view"
          [(viewDate)]="viewDate"
          (viewDateChange)="closeOpenMonthViewDay()"
        >
          <iconify-icon icon="bx:bxs-chevron-right" class="text-xl" />
        </div>
      </div>

      <!-- Botón Hoy -->
      <div
        class="h-8 bg-sky-600 text-slate-50 px-3 rounded-full flex items-center cursor-pointer text-sm font-medium uppercase"
        mwlCalendarToday
        [(viewDate)]="viewDate"
        (viewDateChange)="closeOpenMonthViewDay()"
      >
        Hoy
      </div>
    </div>

    <!-- Mes actual -->
    <h4 class="text-2xl font-medium text-center uppercase">
      {{ viewDate | date: "MMMM yyyy" }}
    </h4>
  </div>

  <!-- Contenido -->
  <div class="h-full flex flex-col px-6">
    <div class="p-2 rounded-lg overflow-y-auto">
      <div [ngSwitch]="viewSelected">
        <!-- Vista calendario -->
        <div *ngSwitchCase="'grid'">
          <div [ngSwitch]="view">
            <mwl-calendar-month-view
              *ngSwitchCase="CalendarView.Month"
              [viewDate]="viewDate"
              [events]="events"
              [refresh]="refresh"
              [activeDayIsOpen]="activeDayIsOpen"
              (dayClicked)="dayClicked($event.day)"
              (eventClicked)="handleEvent('Clicked', $event.event)"
              (eventTimesChanged)="eventTimesChanged($event)"
            >
            </mwl-calendar-month-view>

            <mwl-calendar-week-view
              *ngSwitchCase="CalendarView.Week"
              [viewDate]="viewDate"
              [events]="events"
              [refresh]="refresh"
              (eventClicked)="handleEvent('Clicked', $event.event)"
              (eventTimesChanged)="eventTimesChanged($event)"
            >
            </mwl-calendar-week-view>

            <mwl-calendar-day-view
              *ngSwitchCase="CalendarView.Day"
              [viewDate]="viewDate"
              [events]="events"
              [refresh]="refresh"
              (eventClicked)="handleEvent('Clicked', $event.event)"
              (eventTimesChanged)="eventTimesChanged($event)"
            >
            </mwl-calendar-day-view>
          </div>
        </div>

        <!-- Vista lista -->
        <div *ngSwitchCase="'list'">
          aqui
          <p-table [value]="events" [columns]="cols" stripedRows>
            <ng-template pTemplate="header" let-columns>
              <tr>
                <th *ngFor="let col of columns">{{ col.header }}</th>
              </tr>
            </ng-template>

            <ng-template pTemplate="body" let-item>
              <tr>
                <td>{{ item.title }}</td>
                <td>{{ item.start | date: "dd MMM yyyy" }}</td>
                <td>{{ item.end | date: "dd MMM yyyy" }}</td>
                <td>
                  <button (click)="deleteEvent(item)" class="text-red-600">
                    Eliminar
                  </button>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>
  </div>
</div>

</div>
<p-dialog
  [header]="isloaded ? 'Editar Holidays':'Agregar Holidays'"
  [(visible)]="displayDialog"
  [modal]="true"
  [closable]="false"
  [style]="{ width: '400px' }"
>
  <div class="flex flex-col gap-4">
    <div>
      <label class="block text-sm font-medium mb-1">Nombre</label>
      <input
        type="text"
        pInputText
        [(ngModel)]="newHolidaysTitle"
        placeholder="Ej. Día de la Madre"
        class="w-full"
      />
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Descripción</label>
      <input
        type="text"
        pInputText
        [(ngModel)]="newHolidaysDescription"
        placeholder="Opcional"
        class="w-full"
      />
    </div>

    <div>
      <p class="text-sm text-gray-500">
        Fecha seleccionada:
        <strong>{{ newHolidaysDate | date: "fullDate" }}</strong>
      </p>
    </div>
  </div>
  
  <ng-template pTemplate="footer">
    <button
      pButton
      type="button"
      label="Cancelar"
      class="p-button-text"
      (click)="cancelDialog()"
    ></button>
    @if (isloaded) {
     <button
      pButton
      type="button"
      label="Editar"
      class="p-button-success"
      (click)="saveHolidays()"
    ></button>
    }@else {
    <button
      pButton
      type="button"
      label="Guardar"
      class="p-button-success"
      (click)="saveHolidays()"
    ></button>
    }
    
  </ng-template>
</p-dialog>
